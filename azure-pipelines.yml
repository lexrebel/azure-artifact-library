# Starter pipeline

# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: ubuntu-latest

steps:
- task: Gradle@2
  inputs:
    gradleWrapperFile: 'gradlew'
    tasks: 'build'
    publishJUnitResults: true
    testResultsFiles: '**/TEST-*.xml'
    javaHomeOption: 'JDKVersion'
    sonarQubeRunAnalysis: false
    spotBugsAnalysis: false
- task: UniversalPackages@0
  inputs:
    command: 'publish'
    publishDirectory: '$(Build.ArtifactStagingDirectory)/build/libs/azure-artifact-library-1.0-SNAPSHOT.jar'
    feedsToUsePublish: 'internal'
    vstsFeedPublish: '5cd3e903-e14d-4f40-b36b-a3706213bf6b/a45fd02a-3823-4b67-991b-fabb27599c4e'
    vstsFeedPackagePublish: 'azure-artifact-lib'
    versionOption: 'patch'